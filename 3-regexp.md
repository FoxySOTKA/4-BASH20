# Домашнее задание к занятию "Regexp и его использование для синтаксического анализа"

## Выполнил Савицкий Андрей

### Задание 1.

Напишите регулярное выражение для проверки является ли строка `IPv4` адресом.

Для тестов можно использовать файл со следующим содержимым, фильтруя вывод с помощью команды `grep -E`:
```
192.168.0.1
127.0.0.1
84.345.23.11
88.3A.56.76
224.12.76
999.999.999.999
355.255.255.257
0.0.0.0
```

#### Ответ:

Так как `IPv4` состоит из 4 частей, каждая из которых разделена точкой и диапазон каждой части - от 0 до 255, получаем: 

```bash
grep  -E  «^([0-9]{1,2}\.|1[0-9]{1,2}\.|2[0-4][0-9]\.|25[0-5]\.){3}([0-9]{1,2}|1[0-9]{1,2}|2[0-4][0-9]|25[0-5])$»
```

---

### Задание 2.

В Вашей конфигурации Nginx скопилось много неиспользуемых сегментов и становится сложно его читать.

Используя `sed` удалите все пустые строки и комментарии в конфигурации Nginx.

Попробуйте сделать это одним запуском.

Файл расположен по [ссылке](5-03/nginx.conf)


***Получившееся команда:***

`:~$ sed -Ei 's/^#//' -e '/^$/d' nginx.conf` 

------

### Задание 3.

Используя `awk` и `ps aux` соберите информацию о:
 - количестве процессов для каждого пользователя;
 - процессе с самым большим PID;
 - (дополнительное задание со звездочкой*) суммарном использовании памяти различными пользователями.

*Пришлите скриншоты со скриптами и демонстрацией их работы*

1) Количество процессов для каждого пользователя:
    
   ```bash
    ps aux | awk '{print $1}' | sort | uniq -c
   ``` 

2) Информация о процессе с самым большим PID:
    
   ```bash
   ps aux | sort -rn -k2 | awk 'FNR==1 {print $0}'
   ``` 

---

### Задание 4.

Напишите bash-скрипт который собирает информацию о системе и пишет ее в лог каждые 5 секунд.

Используемые параметры:

- loadavg[1,5,15] средний показатель загрузки ЦПУ за последние 1 5 и 15 минут. *Примечание:* хранится в `/proc/loadavg`.
- memfree количество свободной оперативной памяти в байтах. *Примечание:* используем утилиту `free`.
- memtotal количество всей оперативной памяти в байтах. *Примечание:* используем утилиту `free`.
- diskfree свободное место на диске подключенного к /. *Примечание:* используем утилиту `df`.
- disktotal общий объем диска подключенного к /. *Примечание:* используем утилиту `df`.

***Формат записи:*** `timestamp loadavg1 loadavg5 loadavg15 memfree memtotal diskfree disktotal`

Пособирайте данные в течении 5-10 минут.

Анализируя этот лог с помощью `awk` напишите скрипт проверки состояния системы с заданными условиями:

- `loadavg1 < 1` в течении последних 2 минут;
- `memfree / memtotal < 60%` в течении последних 3 минут;
- `diskfree / disktotal < 60%` в течении последних 5 минут.

Скрипт должен возвращать 0 код ответа, если все условия выполняются, и любой другой в случае невыполнения.

В консоль также необходимо выводить, какое именно из условий не выполняется.

*Пришлите получившиеся скрипты в качестве ответа.*



